## åŸºç¡€æ•°æ®ç±»å‹

å¯¹è±¡ç±»å‹æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼ˆmutableï¼‰ï¼Œè€ŒåŸå§‹ç±»å‹æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼ˆimmutableï¼‰ã€‚

> å­—ç¬¦ä¸²çš„ api æ–¹æ³•éƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸èƒ½ä¿®æ”¹åŸå§‹çš„å­—ç¬¦ä¸²ã€‚

Javascript æœ‰ 5 ç§ åŸºæœ¬ç±»å‹ï¼Œåç»­åŠ å…¥äº† Symbolã€BigIntã€‚

### String

String ç±»å‹æ˜¯é›¶ä¸ªæˆ–å¤šä¸ª 16 ä½æ— ç¬¦å·æ•´æ•°å€¼ï¼ˆ`UTF-16`ç¼–ç æ–¹å¼ï¼‰ç»„æˆï¼Œæœ€å¤§é•¿åº¦ä¸º 2^53-1 ä¸ªæ•´æ•°å€¼ã€‚å­—ç¬¦ä¸²çš„ length å±æ€§æ˜¯å®ƒåŒ…å«çš„ 16 ä½å€¼çš„ä¸ªæ•°ã€‚

ä¸€ä¸ªå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å­—ç¬¦æ•°ç»„ï¼Œä¾‹å¦‚å¯ä½¿ç”¨ includesã€for...of ç­‰æ–¹æ³•ï¼ŒæŒ‰ç´¢å¼•è®¿é—®ã€‚è™½ç„¶èƒ½æŒ‰ç´¢å¼•è®¿é—®ï¼Œå´ä¸èƒ½æŒ‰ç´¢å¼•ä¿®æ”¹ï¼ˆæ— æ•ˆï¼‰ã€‚

ç”±äºå•ä¸ªå­—ç¬¦è¡¨ç¤ºçš„èŒƒå›´æœ‰é™ï¼Œæœ‰äº›å­—ç¬¦ï¼ˆè¶…å‡º BMP çš„éƒ¨åˆ†ï¼‰éœ€è¦ç”¨åˆ° 2 ä¸ª 16 ä½å€¼æ¥è¡¨ç¤ºï¼ˆç§°ä¸º surrogate pairï¼Œå³â€œä»£ç†
å¯¹â€ï¼‰ã€‚åœ¨ length ä¸Šå°±ä¼šè¡¨ç°ä¸º 2ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•è·å–æ¯ä¸ªå­—ç¬¦çš„å…·ä½“å€¼ã€‚ä½†æ˜¯ for...of æ–¹æ³•è·å–åˆ°çš„æ˜¯æ•´ä¸ªä»£ç†å¯¹ã€‚

```js
const str = "ğŸ§¡"; // '\ud83e\udde1'
str.length; // 2
str[0]; // '\ud83e'
str[1]; // '\udde1'

const str2 = str + "hello";
for (const val of str2) {
  console.log(val);
}
// ğŸ§¡
// h
// e
// l
// l
// o
```

#### Unicode

String è¡¨ç¤ºä½¿ç”¨çš„æ˜¯ Unicode å­—ç¬¦é›†ï¼ŒUnicode ç ç‚¹èŒƒå›´ä¸º U+0000~U+FFFFï¼Œå…± 65536 ä¸ªï¼Œä¹Ÿå«åŸºæœ¬å­—ç¬¦åŒºåŸŸï¼ˆBMPï¼‰ã€‚å­—ç¬¦å¢å¤šåï¼Œæ ‡å‡†å†³å®šä»¥ 16 ä½å€¼ç»„æˆçš„å­—ç¬¦ä¸ºä¸€ç»„ï¼Œä¸€ç»„ 65536 ä¸ªï¼Œä¸€ç»„ä¸ºä¸€ä¸ªå¹³é¢ï¼Œä¸€å…± 17 ä¸ªå¹³é¢ï¼Œå³ 0x00 åˆ° 0x10ã€‚

è·å– unicode å€¼ï¼š

- String.prototype.charCodeAt()/String.prototype.codePointAt()
- String.fromCharCode()/String.fromCodePoint()

Unicode å…è®¸ç”¨å¤šç§ç¼–ç æ–¹å¼è¡¨ç¤ºåŒä¸€ä¸ªå­—ç¬¦ï¼Œå°±ä¼šå‡ºç°ä¸¤ä¸ªå­—ç¬¦çœ‹èµ·æ¥ä¸€æ ·ï¼Œå´å¹¶ä¸ä¸¥æ ¼ç›¸
ç­‰ï¼Œå› ä¸º unicode ç¼–ç ä¸ä¸€æ ·ï¼Œè¿™æ—¶éœ€è¦è¿›è¡Œ Unicode çš„å½’ä¸€åŒ–ï¼Œå¸¸ç”¨çš„å½¢å¼æ˜¯ NFCã€‚åœ¨ js ä¸­å¯ä»¥ä½¿ç”¨`normalize`æ–¹æ³•ï¼š

```js
let a = "cafÃ©";
let b = "cafeÌ";
console.log(a === b); // false

let a = "cafÃ©";
let b = "cafeÌ";
a = a.normalize();
b = b.normalize();
console.log(a === b); // true
```

#### æ˜¾ç¤ºæ–¹å¼

- htmlï¼Œä½¿ç”¨`&#x` + unicode ç ã€‚
- jsï¼Œä½¿ç”¨`\u` + unicode ç ï¼Œè¶…å‡º BMP åŒºåŸŸçš„éœ€è¦ä½¿ç”¨`{}`åŒ…è£¹ã€‚
- cssï¼Œä½¿ç”¨`\` + unicode ç ã€‚
- css å±æ€§`unicode-range`ï¼Œä½¿ç”¨`U+` + unicode ç ã€‚

#### è½¬ä¹‰åºåˆ—

åœ¨åå¼•å·``åŒ…è£¹çš„å­—ç¬¦ä¸­ï¼Œä½¿ç”¨åæ–œæ `\`åŠ æ¢è¡Œç¬¦è¿æ¥å­—ç¬¦ä¸²æ—¶ï¼Œè¿™ä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸ç®—ç€å­—ç¬¦ä¸²å†…å®¹çš„ã€‚

![](../images/js/string-translate.png)

### Number

Javascript ä¸­ä½¿ç”¨åŸºäº IEEE754 æ ‡å‡†çš„åŒç²¾åº¦æµ®ç‚¹æ•°æ¥è¡¨ç¤ºæ•°å­—ï¼Œæ ‡å‡†è§„å®šä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ³•ä¸º`(-1)^S * 1.M * 2^E`ï¼Œç»“æ„å¦‚ä¸‹ï¼š

- `1` ç¬¦å·ä½ sign bitï¼Œç”¨æ¥è¡¨ç¤ºæ­£è´Ÿå·
- `11` æŒ‡æ•°ä½ exponentï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•°
- `52` å°¾æ•° mantissaï¼Œç”¨æ¥è¡¨ç¤ºç²¾ç¡®åº¦

![](~images/js/General_double_precision_float.png)

> 32 ä½ç»“æ„å¯¹åº”ï¼ŒS:1/E:8/M:23ã€‚

> 0.1 + 0.2 è¿ç®—ä¸æ ‡å‡†çš„åŸå› å°±åœ¨äºæœ‰çš„æ•°ï¼ˆæ¯”å¦‚ 0.1ï¼‰ç”¨è¯¥æ–¹æ³•è¡¨è¾¾æ—¶æ˜¯æ— ç©·çš„ï¼Œå¿…é¡»è¿›è¡Œæˆªæ–­ï¼Œæ‰€ä»¥ä¸ç²¾ç¡®ã€‚è€Œæ­¤è¿ç®—ï¼Œæœ‰ 2 æ¬¡çš„èˆå…¥ï¼Œé€ æˆäº†ç²¾åº¦ä¸¢å¤±å¾ˆå¤§ã€‚æ¯”è¾ƒå¤§å°æ­£ç¡®çš„æ–¹å¼æ˜¯æ£€æŸ¥ç­‰å¼å·¦å³ä¸¤è¾¹å·®çš„ç»å¯¹å€¼æ˜¯å¦å°äºæœ€å°ç²¾åº¦ï¼š
> `Math.abs(0.1 + 0.2 - 0.3) <= Number.EPSILON`ï¼Œ`Number.EPSILON === 2 ** -52`

> ä¸€ä¸ªæ•°ç”¨ç§‘å­¦æŠ€æœ¯æ³•è¡¨ç¤ºæ—¶ï¼Œå°æ•°ç‚¹ä½ç½®å¯å˜åŒ–ï¼ˆå¢å¤§æˆ–è€…å‡å°æŒ‡æ•°ä½ï¼‰ï¼Œè¿™æ ·çš„è¡¨ç¤ºæ³•å«æµ®ç‚¹æ•°è¡¨ç¤ºæ³•ã€‚ä¼˜ç‚¹æ˜¯ï¼Œå¯ä»¥åˆç†åˆ©ç”¨å†…å­˜ç©ºé—´ï¼Œè€Œå®šç‚¹æ•°è¡¨ç¤ºæ³•å¤ªæ­»æ¿ï¼Œå®¹æ˜“é€ æˆç©ºé—´çš„æµªè´¹ã€‚

> æŒ‡æ•°ä½æ˜¯æ— ç¬¦å·çš„ï¼Œä½†æ˜¯åˆè¦è¡¨ç¤ºè´Ÿæ•°ï¼Œå› æ­¤æŒ‡æ•°ä½é»˜è®¤æ˜¯åŠ ä¸Šäº†ä¸­é—´æ•°åçš„ç»“æœã€‚32 ä½å•ç²¾åº¦æµ®ç‚¹æ•°å¯¹åº”çš„æ˜¯ 8 ä½æŒ‡æ•°ä½ï¼Œä¸­é—´æ•°æ˜¯ 127ï¼Œå®é™…è¡¨ç¤ºèŒƒå›´ä¸º`-127 ~ 128`ï¼Œ64 ä½åˆ™å¯¹åº” 11 ä½æŒ‡æ•°ä½ï¼Œä¸­é—´æ•° 1023ï¼Œè¡¨ç¤ºèŒƒå›´ä½`-1023 ~ 1024`ã€‚

é™¤äº†æ­£å¸¸çš„è®¡ç®—ï¼Œè¿˜æœ‰ä¸€äº›ç‰¹æ®Šå€¼çš„è®¾ç½®ã€‚

- 0 æˆ–è€…å¾ˆå°çš„æ•°ï¼ŒæŒ‡æ•°ä½ E å…¨ 0ï¼Œå°¾æ•°é 0ï¼Œè¿™æ—¶å°¾æ•°éšè—ä½ä¸ä¸º 1ï¼Œä¸º 0ã€‚
- æ­£æ— ç©·/è´Ÿæ— ç©·ï¼ŒæŒ‡æ•°ä½ E å…¨ 1ï¼Œå°¾æ•°å…¨ 0ã€‚ï¼ˆå› æ­¤ Infinity å±äº number ç±»å‹ï¼‰
- NaNï¼ŒæŒ‡æ•°ä½ E å…¨ 1ï¼Œå°¾æ•°é 0ã€‚ï¼ˆå› æ­¤ NaN å±äº number ç±»å‹ï¼‰

js å¯è¡¨ç¤ºçš„å®‰å…¨æ•´æ•°èŒƒå›´ä¸º`2 ** 53 - 1`ï¼Œå®‰å…¨å³è¡¨ç¤ºä¸€ä¸ªæ•°æœ‰å”¯ä¸€çš„æµ®ç‚¹æ•°è¡¨ç¤ºä¸å…¶å¯¹åº”ã€‚ä¸å®‰å…¨åˆ™è¡¨ç¤ºï¼Œå¤šä¸ªä¸åŒçš„æ•´æ•°è¢«åŒä¸€ä¸ªæµ®ç‚¹æ•°è¡¨ç¤ºä¸å…¶å¯¹åº”ã€‚

å­—é¢é‡å¯ä½¿ç”¨ä¸‹åˆ’çº¿ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè®©å…¶æ›´å®¹æ˜“äººä¸ºè¯†åˆ«ã€‚

æœ‰äº› api åœ¨ Number ç±»å’Œå…¨å±€ä¸Šéƒ½æœ‰ï¼Œä¾‹å¦‚ isNaNã€isFinite ç­‰ï¼Œè¿™æ˜¯æœ€å¥½ä½¿ç”¨ Number ç±»ä¸Šçš„æ–¹æ³•ï¼Œåˆ¤æ–­æ›´ä¸ºä¸¥æ ¼ã€‚

#### è¿›åˆ¶è½¬æ¢

`0b`å¼€å¤´äºŒè¿›åˆ¶ï¼Œ`0x`å¼€å¤´ 16 è¿›åˆ¶ã€‚

- 10 è¿›åˆ¶è½¬ n è¿›åˆ¶ï¼Œ`Number.prototype.toString([radix])`
- n è¿›åˆ¶è½¬ 10 è¿›åˆ¶ï¼Œ`window.parseInt(string, radix)`

#### `toFixed()`
å°æ•°ç‚¹ä¼šè¿›è¡Œå››èˆäº”å…¥ã€‚
#### `parseInt()`ã€`parseFloat()`
å¯ä»¥å¤„ç†16è¿›åˆ¶`0x`å­—ç¬¦ä¸²ï¼Œä¸èƒ½å¤„ç†8è¿›åˆ¶`0o`ã€‚

### Boolean

`''`/`undefined`/`null`/`0`/`+0`/`-0`/`NaN`/`false`ä½¿ç”¨ Boolean è½¬æ¢åï¼Œå‡ä¸º falseã€‚

### undefined

`undefined`æ—¢æ˜¯å…¨å±€çš„ä¸€ä¸ªå˜é‡ï¼ˆä»¥å‰å¯æ›´æ”¹ï¼Œç°åœ¨å˜æˆäº† no-configurableã€no-writableã€no-enumerableï¼‰,ä¹Ÿæ˜¯å…¨å±€å˜é‡`undefined`çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å…¨å±€å˜é‡`window.undefined`çš„å€¼ä¸º`undefined`ã€‚

ä»»ä½•å˜é‡æœªèµ‹å€¼ä¹‹å‰éƒ½æ˜¯ Undefined ç±»å‹ï¼Œä¸”å€¼ä¸º undefinedã€‚è€Œæˆ‘ä»¬å¸¸ç”¨ undefined è¿™ä¸ªå…¨å±€å˜é‡æ¥è¡¨ç¤ºå®ƒï¼Œæˆ–è€…ç”¨ void è¿ç®—æ¥äº§ç”Ÿä¸€ä¸ª undefined**å€¼**ã€‚

> void æ˜¯ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œå¯¹ç»™å®šçš„è¡¨è¾¾å¼æ±‚å€¼ï¼Œç„¶åè¿”å› undefined(è¿™é‡ŒæŒ‡çš„æ˜¯å€¼ï¼Œè€Œä¸æ˜¯é‚£ä¸ªå«åš undefined çš„å…¨å±€å˜é‡)ã€‚

### null

null æ˜¯ä¸€ä¸ªè¯­è¨€å…³é”®å­—ï¼Œæ±‚å€¼ä¸ºä¸€ä¸ªç‰¹æ®Šçš„å€¼ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºæŸä¸ªå€¼â€œæ²¡æœ‰å€¼â€ã€‚è¡¨ç¤ºè¿™ä¸ªå˜é‡æœªæŒ‡å‘ä»»ä½•å †å¯¹è±¡ï¼Œå¸¸ç”¨äºä¸»åŠ¨ GC å›æ”¶ã€‚

> `typeof null === 'object'`çš„æ¢—ã€‚åœ¨ JS çš„æœ€åˆç‰ˆæœ¬ä¸­ä½¿ç”¨çš„æ˜¯ 32 ä½ç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨å˜é‡çš„ç±»å‹ä¿¡æ¯ï¼Œ000 å¼€å¤´ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ null è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º object ã€‚è™½ç„¶ç°åœ¨çš„å†…éƒ¨ç±»å‹åˆ¤æ–­ä»£ç å·²ç»æ”¹å˜äº†ï¼Œä½†æ˜¯å¯¹äºè¿™ä¸ª Bug å´æ˜¯ä¸€ç›´æµä¼ ä¸‹æ¥ã€‚

### Symbol

è¡¨ç¤ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„å€¼ï¼Œç›´æ¥ä½¿ç”¨ä¸å¸¦ new çš„æ„é€ å‡½æ•°ç”Ÿæˆã€‚

`Symbol.for()`åˆ™ä¼šä¸€ç›´è¿”å›åŒæ ·çš„å€¼ã€‚

### è½¬æ¢è¿‡ç¨‹
å€¼å¾—æ³¨æ„çš„å‡ ä¸ªè½¬æ¢ã€‚

- è½¬æ•°å­—ï¼Œ`undefined -> NaN`ã€`null -> 0`ã€`[] -> 0`ã€`[1] -> 1`ã€`[1, 2] -> NaN`ã€`' 3 ' -> 3`
- è½¬å¸ƒå°”å€¼ï¼Œ`Infinity -> true`